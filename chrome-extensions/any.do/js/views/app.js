define("jquery,underscore,backbone,libs/jquery/jquery.caret.1.02,windows/loginwindow,windows/forgotwindow,windows/newuserwindow,windows/registerwindow,windows/taskwindow,collections/task,collections/category,server/auth,server/sync,views/loading,config/user,config/global,less".split(","),function(b,c,f,p,g,h,i,j,k,l,m,d,q,r,n,o){return f.View.extend({el:b("#app"),initialize:function(){this.windowContainer=b(this.el).find(".window-container");this.tasks=new l([],{app:this});this.categories=new m;this.mainLoginWindow=
(new g({app:this})).render();this.mainRegisterWindow=(new j({app:this})).render();this.mainNewUserWindow=(new i({app:this})).render();this.mainForgotWindow=(new h({app:this})).render();b(this.mainRegisterWindow.el).appendTo(this.windowContainer);b(this.mainNewUserWindow.el).appendTo(this.windowContainer);b(this.mainLoginWindow.el).appendTo(this.windowContainer);b(this.mainForgotWindow.el).appendTo(this.windowContainer);this.userConfig=null;this.globalConfig=new o;c.bindAll(this,"showTaskList");b(window).scroll(function(){window.scrollTo(0,
b(window).scrollTop())});console.log("Trying to log in...");d.tryLogIn(this.showTaskList,c.bind(this.mainRegisterWindow.show,this));if(typeof chrome!="undefined"){chrome.runtime.onMessage.addListener(c.bind(function(a){switch(a.action){case "refreshTab":this.mainTaskWindow&&this.mainTaskWindow.tasks.fetch();break;case "facebookConnectProcessComplete":case "googleConnectProcessComplete":this.mainTaskWindow||this.showTaskList();break;case "logOut":d.logOut()}},this));this.popOutMode()||(typeof chrome!=
"undefined"?chrome.runtime.sendMessage({action:"closePopup"}):console.error("implement pop out closing"));var a=function(a,c){b(document).on("ajaxSend",function(b,d){d.setRequestHeader(a,c)})};a("AnyDO-Version",chrome.app.getDetails().version);var e=storage.getItem("userPuid");e!=null&&a("AnyDO-Puid",e)}},popOutMode:function(){return document.location.hash=="#popup"},showTaskList:function(){console.log("Showing task list...");this.userConfig=new n;this.mainLoginWindow.hide();this.mainRegisterWindow.hide();
this.mainForgotWindow.hide();this.mainNewUserWindow.hide();this.mainTaskWindow=(new k({app:this})).render();b(this.mainTaskWindow.el).appendTo(this.windowContainer);this.mainTaskWindow.show();typeof chrome!="undefined"?chrome.runtime.sendMessage({action:"logIn"}):console.log("Implement me!")},validName:function(a){return a.length>=3},validEmail:function(a){return/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(a)},
validPassword:function(a){return a.length>=6},refreshBackground:function(){typeof chrome!="undefined"?chrome.runtime.sendMessage({action:"refresh"}):console.log("Implement me!")},checkReminders:function(){typeof chrome!="undefined"?chrome.runtime.sendMessage({action:"refresh"}):console.log("Implement me!")},updateBadge:function(a){typeof chrome!="undefined"?chrome.runtime.sendMessage({action:"updateBadge",numTasks:a}):console.log("Implement me!")},trackClick:function(){typeof chrome!="undefined"?
chrome.runtime.sendMessage({action:"track",track:arguments}):console.log("Implement me!")},trackPageview:function(a){typeof chrome!="undefined"?chrome.runtime.sendMessage({action:"trackPageview",track:a}):console.log("Implement me!")}})});